!function(i){function s(s,e){this.el=s,this.$el=i(s),this.options={startTop:1},i.extend(this.options,e),this.initialize()}s.prototype={initialize:function(){var s=this;this.$page=i("#page").length?i("#page"):i("body"),this.$wrapper=i("#site-header-wrapper"),this.$topArea=i("#top-area"),this.topAreaInSiteHeader=i("#site-header #top-area").length>0,this.$headerMain=i(".header-main",this.$el),this.hasAdminBar=-1!=document.body.className.indexOf("admin-bar"),this.adminBarOffset=0,this.adminBarHeight=0,this.topOffset=0,this.oldScrollY=0,this.isResponsive=null,this.isResponsiveOld=null,this.hideWrapper=this.$wrapper.hasClass("site-header-wrapper-transparent"),this.videoBackground=i(".page-title-block .gem-video-background").length&&i(".page-title-block .gem-video-background").data("headerup"),this.$el.hasClass("header-on-slideshow")&&i("#main-content > *").first().is(".gem-slideshow, .block-slideshow")&&this.$wrapper.css({position:"absolute"}),this.$el.hasClass("header-on-slideshow")&&i("#main-content > *").first().is(".gem-slideshow, .block-slideshow")?this.$wrapper.addClass("header-on-slideshow"):this.$el.removeClass("header-on-slideshow"),this.videoBackground&&(this.$el.addClass("header-on-slideshow"),this.$wrapper.addClass("header-on-slideshow")),this.initHeader(),i(document).ready((function(){s.updateAdminBarInfo(),s.updateStartTop()})),i(window).scroll((function(){s.scrollHandler()})),i("#thegem-perspective").length&&this.$page.scroll((function(){s.scrollHandler()})),i(window).resize((function(){setTimeout((function(){s.initHeader(),s.scrollHandler()}),0)}))},initHeader:function(){this.isResponsiveOld=this.isResponsive,this.isResponsive=window.isResponsiveMenuVisible(),this.isResponsive?this.$el.addClass("shrink-mobile"):this.$el.removeClass("shrink-mobile"),this.updateAdminBarInfo(),this.updateStartTop(),this.isResponsive!=this.isResponsiveOld&&this.initializeStyles()},updateAdminBarInfo:function(){this.hasAdminBar&&(this.adminBarHeight=i("#wpadminbar").outerHeight(),this.adminBarOffset=this.hasAdminBar&&"fixed"==i("#wpadminbar").css("position")?parseInt(this.adminBarHeight):0)},updateStartTop:function(){this.$topArea.length&&this.$topArea.is(":visible")&&!this.topAreaInSiteHeader?this.options.startTop=this.$topArea.outerHeight():this.options.startTop=1,this.hasAdminBar&&0==this.adminBarOffset&&(this.options.startTop+=this.adminBarHeight)},setMargin:function(i){var s=i.siblings("img.small"),e=0;if(this.$headerMain.hasClass("logo-position-right"))e=s.width();else if(this.$headerMain.hasClass("logo-position-center")||this.$headerMain.hasClass("logo-position-menu_center")){e=i.width();var t=s.width(),a=(e-t)/2;e=t+a,s.css("margin-right",a+"px")}e||(e=i.width()),s.css("margin-left","-"+e+"px"),i.parent().css("min-width",e+"px"),s.show()},initializeStyles:function(){var s=this;if(this.$headerMain.hasClass("logo-position-menu_center"))var e=i("#primary-navigation .menu-item-logo a .logo img.default",this.$el);else e=i(".site-title a .logo img:visible",this.$el);e.length&&e[0].complete?(s.setMargin(e),s.initializeHeight()):e.on("load error",(function(){s.setMargin(e),s.initializeHeight()}))},initializeHeight:function(){if(this.hideWrapper)return!1;that=this,setTimeout((function(){var i=that.$el.hasClass("shrink");i&&that.$el.removeClass("shrink").addClass("without-transition");var s=that.$el.outerHeight();that.$wrapper.height(s),i&&that.$el.addClass("shrink").removeClass("without-transition")}),50)},scrollHandler:function(){var s=this,e=this.getScrollY();if(e>=this.options.startTop){if(!this.$el.hasClass("shrink")){var t="shrink fixed";window.gemSettings.fillTopArea&&(t+=" fill"),this.$el.addClass(t)}var a=0;this.$page[0].scrollTop>0?a+=this.$page[0].scrollTop:this.hasAdminBar&&(a+=this.adminBarOffset),this.$el.css({top:0!=a?a:""})}else this.$el.hasClass("shrink")&&this.$el.removeClass("shrink fixed"),this.hasAdminBar&&this.$el.css({top:""});this.isResponsive&&!this.$wrapper.hasClass("sticky-header-on-mobile")&&(i(".mobile-menu-slide-wrapper.opened").length||i("#primary-menu.dl-menuopen").length||i(".menu-overlay.active").length?s.$el.removeClass("hidden"):(e-this.oldScrollY>0&&e>300&&!this.$el.hasClass("hidden")&&s.$el.addClass("hidden"),e-this.oldScrollY<0&&this.$el.hasClass("hidden")&&s.$el.removeClass("hidden"))),this.oldScrollY=e},getScrollY:function(){return window.pageYOffset||document.documentElement.scrollTop+this.$page[0].scrollTop}},i.fn.headerAnimation=function(i){return i=i||{},new s(this.get(0),i)}}(jQuery);