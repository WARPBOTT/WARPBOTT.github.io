function supportsTransitions(){return""!=getSupportedTransition()}function getSupportedTransition(){var e=(document.body||document.documentElement).style,i="transition";if("string"==typeof e[i])return i;var t=["Moz","webkit","Webkit","Khtml","O","ms"];i=i.charAt(0).toUpperCase()+i.substr(1);for(var n=0;n<t.length;n++)if("string"==typeof e[t[n]+i])return!0;return""}function supportsAnimations(){return""!=getSupportedAnimation()}function getSupportedAnimation(){var e,i=document.createElement("fakeelement");for(e in{animation:"animationend",OAnimation:"oAnimationEnd",MozAnimation:"animationend",WebkitAnimation:"webkitAnimationEnd",msAnimation:"MSAnimationEnd"})if(void 0!==i.style[e])return e;return""}function getMobileMenuType(){if(!document.getElementById("site-header"))return"default";var e=document.getElementById("site-header").className.match(/mobile-menu-layout-([a-zA-Z0-9]+)/);return window.gemMobileMenuType=e?e[1]:"default",window.gemMobileMenuType}window.supportedTransition=getSupportedTransition(),window.supportsTransitions=supportsTransitions(),window.supportedAnimation=getSupportedAnimation(),window.supportsAnimations=supportsAnimations(),getMobileMenuType(),function(){var e=!1;function i(e){for(var i=e.offsetWidth,t=e.offsetHeight,n=0,o=0;e;)n+=e.offsetLeft,o+=e.offsetTop,e=e.offsetParent;return{left:n,top:o,width:i,height:t}}window.thegemDesktopMenuLogoFixed=!1,window.thegemWasDesktop=!1,window.megaMenuWithSettingsFixed=!1,window.fixMenuLogoPosition=function(){e&&clearTimeout(e);var t=document.querySelector("#site-header .header-main");if(null==t)return!1;var n=t.className;if(-1==n.indexOf("logo-position-menu_center")||-1!=n.indexOf("header-layout-fullwidth_hamburger")||-1!=n.indexOf("header-layout-vertical"))return!1;e=setTimeout((function(){var e=document.getElementById("page"),t=document.getElementById("primary-menu"),o=document.getElementById("primary-navigation"),a=e.offsetWidth,s=window.getComputedStyle(e,null),r=parseFloat(s.marginLeft);if(isNaN(r)&&(r=0),-1!=n.indexOf("header-layout-fullwidth")){for(var l=t.querySelector(".menu-item-logo"),m=o.querySelectorAll("#primary-menu > li"),u=null,d=m.length-1;d>=0;d--)if(-1==m[d].className.indexOf("mobile-only")){u=m[d];break}if(t.style.display="",l.style.marginLeft="",l.style.marginRight="",a<1212||null===u)return;window.thegemDesktopMenuLogoFixed=!0,t.style.display="block";var c=(v=a/2+r)-(w=i(l)).left-l.offsetWidth/2;l.style.marginLeft=c+"px";var p=t.offsetWidth,g=i(t).left,f=u.offsetWidth,h=p-i(u).left-f+g;l.style.marginRight=h+"px"}else{if(a<1212)return o.style.textAlign="",t.style.position="",void(t.style.left="");window.thegemDesktopMenuLogoFixed=!0,o.style.textAlign="left",t.style.left="0px";var v=a/2,w=(g=i(t).left,i(document.querySelector("#site-header .header-main #primary-navigation .menu-item-logo"))),y=i(e);g+(c=v-(w.left-y.left)-document.querySelector("#site-header .header-main #primary-navigation .menu-item-logo").offsetWidth/2)>=0?(t.style.position="relative",t.style.left=c+"px"):(t.style.position="",t.style.left="")}}),50)},window.gemOptions.clientWidth>1212&&window.addEventListener("load",(function(e){window.fixMenuLogoPosition()}),!1)}(),function(e){var i=e(".header-main").hasClass("header-layout-vertical"),t=e(".header-main").hasClass("header-layout-fullwidth_hamburger"),n=e("#thegem-perspective").length>0;e(window).resize((function(){window.updateGemClientSize(!1),window.updateGemInnerSize()})),window.menuResizeTimeoutHandler=!1;var o={};function a(e){if(e.getBoundingClientRect&&"ios"!=window.gemBrowser.platform.name){var i=e.getBoundingClientRect(),t=e.ownerDocument.documentElement,n={x:window.pageXOffset||document.documentElement.scrollLeft,y:window.pageYOffset||document.documentElement.scrollTop},o=function(e){var i=e.parentNode,t={x:0,y:0};for(;i&&!d(i);)t.x+=i.scrollLeft,t.y+=i.scrollTop,i=i.parentNode;return t}(e),a="fixed"==s(e,"position");return{x:parseInt(i.left)+o.x+(a?0:n.x)-t.clientLeft,y:parseInt(i.top)+o.y+(a?0:n.y)-t.clientTop}}var r=e,c={x:0,y:0};if(d(e))return c;for(;r&&!d(r);){if(c.x+=r.offsetLeft,c.y+=r.offsetTop,"firefox"==window.gemBrowser.name){l(r)||(c.x+=u(r),c.y+=m(r));var p=r.parentNode;p&&"visible"!=s(p,"overflow")&&(c.x+=u(p),c.y+=m(p))}else r!=e&&"safari"==window.gemBrowser.name&&(c.x+=u(r),c.y+=m(r));r=r.offsetParent}return"firefox"!=window.gemBrowser.name||l(e)||(c.x-=u(e),c.y-=m(e)),c}function s(i,t){return e(i).css(t)}function r(e,i){return parseInt(s(e,i))||0}function l(e){return"border-box"==s(e,"-moz-box-sizing")}function m(e){return r(e,"border-top-width")}function u(e){return r(e,"border-left-width")}function d(e){return/^(?:body|html)$/i.test(e.tagName)}function c(){if(p()&&!window.thegemWasDesktop)return!1;window.megaMenuWithSettingsFixed=!0,function(){if(null==window.customMegaMenuSettings||null==window.customMegaMenuSettings)return!1;var e=window.location.pathname;window.customMegaMenuSettings.forEach((function(i){for(var t=0;t<i.urls.length;t++)e.match(i.urls[t])&&(o[i.menuItem]=i.data)}))}(),e("#primary-menu > li.megamenu-enable").each((function(){var i=this.className.match(/(menu-item-(\d+))/);if(i){var t=parseInt(i[2]);if(null!=o[t]&&null!=o[t]){var n=e("> ul",this);null!=o[t].masonry&&(o[t].masonry?n.addClass("megamenu-masonry"):n.removeClass("megamenu-masonry")),null!=o[t].style&&e(this).removeClass("megamenu-style-default megamenu-style-grid").addClass("megamenu-style-"+o[t].style);var a={};null!=o[t].backgroundImage&&(a.backgroundImage=o[t].backgroundImage),null!=o[t].backgroundPosition&&(a.backgroundPosition=o[t].backgroundPosition),null!=o[t].padding&&(a.padding=o[t].padding),null!=o[t].borderRight&&(a.borderRight=o[t].borderRight),n.css(a)}}}))}function p(){return e(".primary-navigation .menu-toggle").is(":visible")}function g(o,s){if(!e(".megamenu-inited",o).length&&p())return!1;var r=e("> ul",o);if(0!=r.length){var l=r.get(0);r.addClass("megamenu-item-inited");var m={width:"auto",height:"auto"};if(i||t||n||(m.left=0),r.removeClass("megamenu-masonry-inited megamenu-fullwidth").css(m),e(" > li",r).css({left:0,top:0}).each((function(){var i=e(this).data("old-width")||-1;-1!=i&&e(this).width(i).data("old-width",-1)})),!p()){if(void 0!==s)var u=s();else if(i)u=window.gemOptions.clientWidth-e("#site-header-wrapper").outerWidth();else if(n)u=window.gemOptions.clientWidth-e("#primary-navigation").outerWidth();else if(t)u=window.gemOptions.clientWidth-e("#primary-menu").outerWidth();else var d=r.closest(".header-main"),c=(u=d.width(),parseInt(d.css("padding-left"))),g=parseInt(d.css("padding-right")),f=r.parent().outerWidth();var h=r.outerWidth();if(h>u){h=u;var v=u-parseInt(r.css("padding-left"))-parseInt(r.css("padding-right")),w=r.data("megamenu-columns")||4,y=parseFloat(v-w*parseInt(e(" > li.menu-item:first",r).css("margin-left")))/w,b=parseInt(y);e(" > li",r).each((function(){e(this).data("old-width",e(this).width()).css("width",b)})),r.addClass("megamenu-fullwidth").width(v-(y-b)*w)}if(!i&&!t&&!n&&void 0===s){if(h>f)var C=-(h-f)/2;else C=0;var T=a(d[0]),k=a(l);k.x-T.x-c+C<0&&(C=-(k.x-T.x-c)),k.x+h+C>T.x+d.outerWidth()-g&&(C-=k.x+h+C-(T.x+d.outerWidth()-g)),r.css("left",C).css("left")}if(r.hasClass("megamenu-masonry")){var x={},M=0;r.width(r.width()-1);var E=e(".megamenu-new-row",r).outerHeight()+parseInt(e(".megamenu-new-row",r).css("margin-bottom"));e("> li.menu-item",r).each((function(){var i=e(this).position();if(null!=x[i.left]&&null!=x[i.left])var t=x[i.left];else t=i.top;x[i.left]=t+e(this).outerHeight()+E+parseInt(e(this).css("margin-bottom")),x[i.left]>M&&(M=x[i.left]),e(this).css({left:i.left,top:t})})),r.height(M-E-parseInt(r.css("padding-top"))-1),r.addClass("megamenu-masonry-inited")}if(r.hasClass("megamenu-empty-right")){var W=r.width(),H={columns:[],position:-1};e("> li.menu-item",r).removeClass("megamenu-no-right-border").each((function(){var i=e(this).position().left+e(this).width();i>H.position&&(H.position=i,H.columns=[]),i==H.position&&H.columns.push(e(this))})),H.columns.length&&H.position>=W-7&&H.columns.forEach((function(e){e.addClass("megamenu-no-right-border")}))}if(i||t||n){var I=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,L=r.offset(),S=r.outerHeight(),D=e(window).scrollTop();L.top-D+S>I&&r.css({top:I-L.top+D-S-20})}r.addClass("megamenu-inited")}}}function f(){if(p()){if("default"==window.gemMobileMenuType){var i=e("#primary-navigation .dl-submenu-disabled");i.length&&i.addClass("dl-submenu").removeClass("dl-submenu-disabled")}e("#primary-menu").hasClass("no-responsive")&&e("#primary-menu").removeClass("no-responsive"),e("#primary-navigation").hasClass("responsive")||e("#primary-navigation").addClass("responsive"),e(".menu-overlay").addClass("mobile"),window.thegemDesktopMenuLogoFixed&&window.fixMenuLogoPosition(),e("body").hasClass("mobile-cart-position-top")&&(e(".mobile-cart > .minicart-menu-link.temp").remove(),e("#primary-navigation .menu-item-cart > *").appendTo(".mobile-cart"))}else window.thegemWasDesktop=!0,"overlay"==window.gemMobileMenuType&&!e(".header-layout-overlay").length&&e(".menu-overlay").hasClass("active")&&e(".mobile-menu-layout-overlay .menu-toggle").click(),e("#primary-navigation").addClass("without-transition"),"default"==window.gemMobileMenuType&&e("#primary-navigation .dl-submenu").addClass("dl-submenu-disabled").removeClass("dl-submenu"),e("#primary-menu").addClass("no-responsive"),e("#primary-navigation").removeClass("responsive"),e(".menu-overlay").removeClass("mobile"),window.fixMenuLogoPosition(),window.megaMenuWithSettingsFixed||c(),e("#primary-navigation").removeClass("without-transition"),e("body").hasClass("mobile-cart-position-top")&&(e(".mobile-cart > .minicart-menu-link.temp").remove(),e(".mobile-cart > *").appendTo("#primary-navigation .menu-item-cart"))}if(window.isResponsiveMenuVisible=p,window.isTopAreaVisible=function(){return!window.gemSettings.topAreaMobileDisable||window.gemOptions.clientWidth>=768},e("#primary-menu > li.megamenu-enable").hover((function(){g(this)}),(function(){})),e("#primary-menu > li.megamenu-enable:hover").each((function(){g(this)})),e("#primary-menu > li.megamenu-enable").each((function(){var i=e("> ul",this);0!=i.length&&i.addClass("megamenu-item-inited")})),window.fix_megamenu_position=g,e((function(){e(document).on("click",".mobile-cart > a",(function(i){i.preventDefault(),e(".mobile-cart .minicart").addClass("minicart-show"),e("body").data("scroll-position",window.pageYOffset||document.documentElement.scrollTop),e("body").addClass("mobile-minicart-opened")})),e(document).on("click",".mobile-cart-header-close, .mobile-minicart-overlay",(function(i){i.preventDefault(),e(".mobile-cart .minicart").removeClass("minicart-show"),e("body").removeClass("mobile-minicart-opened"),e("body").data("scroll-position")&&window.scrollTo(0,e("body").data("scroll-position"))}))})),"default"==window.gemMobileMenuType&&e("#primary-navigation .submenu-languages").addClass("dl-submenu"),e("#primary-navigation ul#primary-menu > li.menu-item-language, #primary-navigation ul#primary-menu > li.menu-item-type-wpml_ls_menu_item").addClass("menu-item-parent"),e("#primary-navigation ul#primary-menu > li.menu-item-language > a, #primary-navigation ul#primary-menu > li.menu-item-type-wpml_ls_menu_item > a").after('<span class="menu-item-parent-toggle"></span>'),c(),"default"==window.gemMobileMenuType){var h=function(){var i=e("#site-header").outerHeight(),t=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;e("#thegem-perspective #primary-menu").length&&e("#thegem-perspective > .mobile-menu-layout-default").css({top:i}),e("#primary-menu").css({maxHeight:t-i})};e(window).resize((function(){p()&&e("#primary-menu").hasClass("dl-menuopen")?setTimeout(h,50):e("#primary-menu").css({maxHeight:""})})),e("#site-header .dl-trigger").on("click",(function(){h()})),"function"==typeof e.fn.dlmenu&&e("#primary-navigation").dlmenu({animationClasses:{classin:"dl-animate-in",classout:"dl-animate-out"},onLevelClick:function(e,i){},backLabel:thegem_dlmenu_settings.backLabel,showCurrentLabel:thegem_dlmenu_settings.showCurrentLabel})}f(),e("#primary-menu > li").hover((function(){var o=e("ul:not(.minicart ul), .minicart, .minisearch",this);if(o.removeClass("invert vertical-invert"),e(this).hasClass("megamenu-enable")||o.css({top:""}),!(e(this).hasClass("megamenu-enable")||e(this).closest(".header-layout-overlay").length||e(this).closest(".mobile-menu-layout-overlay").length&&p())){var a=0;e(">ul",this).css("transform")&&(a=parseInt(e(">ul",this).css("transform").split(",")[5])),isNaN(a)&&(a=0);var s=e(window).scrollTop(),r=e("#site-header").offset().top-s,l=e("#site-header").outerHeight(),m=e("#page").offset(),u=e("#page").width();o.each((function(){var o=e(this),d=o.parent().closest("ul"),c=o.offset(),p=c.top-s,g=c.left,f=0;if(o.css("transform")){f=parseInt(getComputedStyle(this).transform.split(",")[4]);var h=function(i){var t=e(i).parent("li").parent("ul"),n=0;for(;!t.is("#primary-menu");)t=t.parent("li").parent("ul"),n++;return n}(this);h>0&&(f*=h)}if(isNaN(f)&&(f=0),d.hasClass("invert")?d.offset().left-o.outerWidth()>m.left&&o.addClass("invert"):g-f-m.left+o.outerWidth()>u&&o.addClass("invert"),i||n||t){if(p-a+o.outerHeight()>e(window).height()){o.addClass("vertical-invert");var v=p-a+o.outerHeight()-e(window).height();p-a-v<0&&(v=0),o.css({top:-v+"px"})}}else if(p-a+o.outerHeight()>e(window).height()){o.addClass("vertical-invert");v=p-a+o.outerHeight()-e(window).height();p-a-v<r+l&&(v-=r+l-(p-a-v))<0&&(v=0),v>0&&o.css({top:-v+"px"})}}))}}),(function(){})),e(".hamburger-toggle").click((function(i){i.preventDefault(),e(this).closest("#primary-navigation").toggleClass("hamburger-active"),e(".hamburger-overlay").toggleClass("active")})),e(".overlay-toggle, .mobile-menu-layout-overlay .menu-toggle").click((function(i){var t=this;i.preventDefault(),e(".menu-overlay").hasClass("active")?(e(".menu-overlay").removeClass("active"),e(".primary-navigation").addClass("close"),e(".primary-navigation").one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",(function(i){e(".primary-navigation").removeClass("overlay-active close"),e(".overlay-menu-wrapper").removeClass("active")})),e(document).off("keydown.overlay-close"),e("#primary-menu").off("click.overlay-close")):(e(".overlay-menu-wrapper").addClass("active"),e(".primary-navigation").off("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend"),e(".primary-navigation").addClass("overlay-active").removeClass("close"),p()?(e("#site-header").removeClass("hidden"),e(".menu-overlay").addClass("mobile")):e(".menu-overlay").removeClass("mobile"),e(".menu-overlay").addClass("active"),e(document).on("keydown.overlay-close",(function(e){27==e.keyCode&&t.click()})),e("#primary-menu").on("click.overlay-close","li:not(.menu-item-search)",(function(){t.click()})))})),e(".mobile-menu-layout-slide-horizontal .primary-navigation #primary-menu li.menu-item-current, .mobile-menu-layout-slide-vertical .primary-navigation #primary-menu li.menu-item-current").each((function(){p()&&(e(this).addClass("opened"),e("> ul",this).show())})),e(".mobile-menu-layout-slide-horizontal .menu-toggle, .mobile-menu-layout-slide-vertical .menu-toggle, .mobile-menu-slide-wrapper .mobile-menu-slide-close").click((function(i){p()&&(i.preventDefault(),e("#site-header").removeClass("hidden"),e(".mobile-menu-slide-wrapper").one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",(function(i){e(this).removeClass("animation")})),e(".mobile-menu-slide-wrapper").addClass("animation").toggleClass("opened"),e("#site-header").toggleClass("menu-slide-opened"),e(".mobile-menu-slide-wrapper").hasClass("opened")?(e("body").data("scroll-position",window.pageYOffset||document.documentElement.scrollTop),e("body").addClass("menu-scroll-locked")):(e("body").removeClass("menu-scroll-locked"),e("body").data("scroll-position")&&window.scrollTo(0,e("body").data("scroll-position"))),setTimeout((function(){e(document).on("click.mobile-menu-out-click",(function(i){e(".mobile-menu-slide-wrapper").hasClass("opened")&&(e(i.target).is("#site-header *")||e(i.target).is("#thegem-perspective *")||(i.preventDefault(),e(".mobile-menu-slide-wrapper .mobile-menu-slide-close").trigger("click"),e(document).off("click.mobile-menu-out-click")))}))}),500))})),e(".mobile-menu-layout-slide-horizontal .primary-navigation #primary-menu .menu-item-parent-toggle, .mobile-menu-layout-slide-vertical .primary-navigation #primary-menu .menu-item-parent-toggle").on("click",(function(i){if(p()){i.preventDefault();var t=this;e(this).closest("li").toggleClass("opened"),e(this).siblings("ul").slideToggle(200,(function(){e(t).closest("li").hasClass("opened")||(e(t).siblings("ul").find("li").removeClass("opened"),e(t).siblings("ul").css("display",""),e(t).siblings("ul").find("ul").css("display",""))}))}})),e(".header-layout-overlay #primary-menu .menu-item-parent-toggle, .mobile-menu-layout-overlay .primary-navigation #primary-menu .menu-item-parent-toggle").on("click",(function(i){if(i.preventDefault(),i.stopPropagation(),e("#primary-menu").hasClass("no-responsive")||e(this).hasClass("menu-item-parent-toggle")){var t=e(this).closest("li");if(t.hasClass("menu-item-parent")&&(t.closest("ul").hasClass("nav-menu")||t.parent().closest("li").hasClass("menu-overlay-item-open")))if(i.preventDefault(),t.hasClass("menu-overlay-item-open"))e(" > ul, .menu-overlay-item-open > ul",t).each((function(){e(this).css({height:e(this).outerHeight()+"px"})})),setTimeout((function(){e(" > ul, .menu-overlay-item-open > ul",t).css({height:""}),e(".menu-overlay-item-open",t).add(t).removeClass("menu-overlay-item-open")}),50);else{var n=e(".primary-navigation .menu-overlay-item-open").not(t.parents());e("> ul",n).not(t.parents()).each((function(){e(this).css({height:e(this).outerHeight()+"px"})})),setTimeout((function(){e("> ul",n).not(t.parents()).css({height:""}),n.removeClass("menu-overlay-item-open")}),50),e("> ul",t).css({height:"auto"});var o=e("> ul",t).outerHeight();e("> ul",t).css({height:""}),setTimeout((function(){e("> ul",t).css({height:o+"px"}),t.addClass("menu-overlay-item-open"),e("> ul",t).one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",(function(){e("> ul",t).css({height:"auto"})}))}),50)}}})),e(".vertical-toggle").click((function(i){i.preventDefault(),e(this).closest("#site-header-wrapper").toggleClass("vertical-active")})),e((function(){e(window).resize((function(){window.menuResizeTimeoutHandler&&clearTimeout(window.menuResizeTimeoutHandler),window.menuResizeTimeoutHandler=setTimeout(f,50)}))})),e("#primary-navigation").on("click","a",(function(i){var t=e(this);e("#primary-menu").hasClass("no-responsive")&&window.gemSettings.isTouch&&t.next("ul").length&&i.preventDefault()})),e(document).on("click",(function(i){!e(".hamburger-overlay").hasClass("active")||e(i.target).closest("#primary-menu").length||e(i.target).closest(".hamburger-toggle").length||e(".hamburger-toggle").trigger("click"),e("#site-header-wrapper").hasClass("vertical-active")&&(e("#site-header-wrapper").is(i.target)||0!==e("#site-header-wrapper").has(i.target).length||e(".vertical-toggle").trigger("click"))}))}(jQuery),function(e){var i={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"}[window.supportedTransition],t="click";!function(){var n=e(".perspective-toggle"),o=e("#thegem-perspective"),a=e("#page");if(!o.length)return!1;n.on(t,(function(i){if(!o.hasClass("animate")){var t=e(window).scrollTop();e(window).scrollTop(0);var n=a.outerWidth(),s={width:n};n<o.outerWidth()&&(s.marginLeft=a[0].offsetLeft),a.css(s),o.addClass("modalview animate"),a.scrollTop(t),i.preventDefault(),i.stopPropagation?i.stopPropagation():i.cancelBubble=!0}})),e("#primary-navigation").on(t,(function(e){isResponsiveMenuVisible()||(e.stopPropagation?e.stopPropagation():e.cancelBubble=!0)})),e("#thegem-perspective .perspective-menu-close").on(t,(function(e){o.click(),e.preventDefault(),e.stopPropagation?e.stopPropagation():e.cancelBubble=!0})),o.on(t,(function(t){if(o.hasClass("animate")){var n=function(t){if(!window.supportsTransitions||"page"===t.originalEvent.target.id&&-1!=t.originalEvent.propertyName.indexOf("transform")){e(this).off(i,n);var s=a.scrollTop();o.removeClass("modalview"),a.css({width:"",marginLeft:""}),e(window).scrollTop(s),a.scrollTop(0),e(window).resize()}};window.supportsTransitions?o.on(i,n):n.call(),o.removeClass("animate")}}))}()}(jQuery);